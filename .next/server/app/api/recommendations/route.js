"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/recommendations/route";
exports.ids = ["app/api/recommendations/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Frecommendations%2Froute&page=%2Fapi%2Frecommendations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frecommendations%2Froute.ts&appDir=C%3A%5CUsers%5CKatekaniNyamandi%5Cbookhaven%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKatekaniNyamandi%5Cbookhaven&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Frecommendations%2Froute&page=%2Fapi%2Frecommendations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frecommendations%2Froute.ts&appDir=C%3A%5CUsers%5CKatekaniNyamandi%5Cbookhaven%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKatekaniNyamandi%5Cbookhaven&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_KatekaniNyamandi_bookhaven_app_api_recommendations_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/recommendations/route.ts */ \"(rsc)/./app/api/recommendations/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/recommendations/route\",\n        pathname: \"/api/recommendations\",\n        filename: \"route\",\n        bundlePath: \"app/api/recommendations/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\KatekaniNyamandi\\\\bookhaven\\\\app\\\\api\\\\recommendations\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_KatekaniNyamandi_bookhaven_app_api_recommendations_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/recommendations/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyZWNvbW1lbmRhdGlvbnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJlY29tbWVuZGF0aW9ucyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJlY29tbWVuZGF0aW9ucyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNLYXRla2FuaU55YW1hbmRpJTVDYm9va2hhdmVuJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNLYXRla2FuaU55YW1hbmRpJTVDYm9va2hhdmVuJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUMyQjtBQUN4RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvb2toYXZlbi8/YWMyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxLYXRla2FuaU55YW1hbmRpXFxcXGJvb2toYXZlblxcXFxhcHBcXFxcYXBpXFxcXHJlY29tbWVuZGF0aW9uc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcmVjb21tZW5kYXRpb25zL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcmVjb21tZW5kYXRpb25zXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yZWNvbW1lbmRhdGlvbnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxLYXRla2FuaU55YW1hbmRpXFxcXGJvb2toYXZlblxcXFxhcHBcXFxcYXBpXFxcXHJlY29tbWVuZGF0aW9uc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcmVjb21tZW5kYXRpb25zL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Frecommendations%2Froute&page=%2Fapi%2Frecommendations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frecommendations%2Froute.ts&appDir=C%3A%5CUsers%5CKatekaniNyamandi%5Cbookhaven%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKatekaniNyamandi%5Cbookhaven&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/recommendations/route.ts":
/*!******************************************!*\
  !*** ./app/api/recommendations/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_openLibrary__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/openLibrary */ \"(rsc)/./lib/openLibrary.ts\");\n\n\n\n\n// Force dynamic rendering for this route\nconst dynamic = \"force-dynamic\";\n// Simple recommendation algorithm based on user preferences and ratings\nasync function GET(request) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.email) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const url = new URL(request.url);\n        const limit = parseInt(url.searchParams.get(\"limit\") || \"20\");\n        const refresh = url.searchParams.get(\"refresh\") === \"true\";\n        const userEmail = session.user.email;\n        // In a real app, you would fetch user preferences from database\n        // For now, we'll use a simple recommendation algorithm\n        // Get user preferences (you would fetch this from your database)\n        const userPreferences = getUserPreferences(userEmail);\n        const recommendations = await generateRecommendations(userPreferences, limit, refresh);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: recommendations\n        });\n    } catch (error) {\n        console.error(\"Error generating recommendations:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to generate recommendations\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Simulate getting user preferences (replace with actual database call)\nfunction getUserPreferences(userEmail) {\n    // This would be replaced with actual database lookup\n    return {\n        genres: [\n            \"fiction\",\n            \"mystery\",\n            \"science\"\n        ],\n        ratings: {\n            books: [],\n            authors: []\n        },\n        favoriteAuthors: [],\n        dislikedGenres: []\n    };\n}\n// Simple recommendation algorithm\nasync function generateRecommendations(preferences, limit, refresh = false) {\n    const recommendations = [];\n    // Add some randomization when refreshing\n    const genresToUse = refresh ? [\n        ...preferences.genres\n    ].sort(()=>Math.random() - 0.5) // Randomize genre order\n     : preferences.genres;\n    // Generate recommendations based on preferred genres\n    for (const genre of genresToUse.slice(0, 3)){\n        try {\n            // Vary the number of books fetched and add randomness for refresh\n            const booksToFetch = refresh ? Math.floor(Math.random() * 10) + 5 : 5;\n            const searchResult = await _lib_openLibrary__WEBPACK_IMPORTED_MODULE_3__.OpenLibraryAPI.searchByGenre(genre, booksToFetch);\n            let books = searchResult.docs;\n            // If refreshing, randomize the book selection\n            if (refresh) {\n                books = books.sort(()=>Math.random() - 0.5);\n            }\n            books.forEach((book)=>{\n                // Simple scoring algorithm with randomization for refresh\n                let score = refresh ? Math.random() * 0.3 + 0.4 : 0.5; // Base score with variation\n                // Boost score for preferred genres\n                if (preferences.genres.some((g)=>book.subject?.some((s)=>s.toLowerCase().includes(g.toLowerCase())))) {\n                    score += refresh ? Math.random() * 0.4 + 0.2 : 0.3;\n                }\n                // Boost score for favorite authors\n                if (preferences.favoriteAuthors.some((author)=>book.author_name?.some((a)=>a.toLowerCase().includes(author.toLowerCase())))) {\n                    score += refresh ? Math.random() * 0.5 + 0.3 : 0.4;\n                }\n                // Reduce score for disliked genres\n                if (preferences.dislikedGenres.some((g)=>book.subject?.some((s)=>s.toLowerCase().includes(g.toLowerCase())))) {\n                    score -= refresh ? Math.random() * 0.3 + 0.1 : 0.2;\n                }\n                recommendations.push({\n                    ...book,\n                    recommendation_score: score,\n                    recommendation_reason: `Based on your interest in ${genre}`\n                });\n            });\n        } catch (error) {\n            console.error(`Error fetching books for genre ${genre}:`, error);\n        }\n    }\n    // Sort by recommendation score and remove duplicates\n    let uniqueRecommendations = recommendations.filter((book, index, self)=>index === self.findIndex((b)=>b.key === book.key)).sort((a, b)=>b.recommendation_score - a.recommendation_score);\n    // If refreshing, add some randomization to the final selection\n    if (refresh) {\n        uniqueRecommendations = uniqueRecommendations.sort(()=>Math.random() - 0.5);\n    }\n    return uniqueRecommendations.slice(0, limit);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0YsRUFBRUUsb0JBQW9CO0lBRWpFLCtEQUErRDtJQUMvRCxJQUFJeEMsU0FBUztRQUNYMEMsd0JBQXdCQSxzQkFBc0J6QixJQUFJLENBQ2hELElBQU1DLEtBQUtDLE1BQU0sS0FBSztJQUUxQjtJQUVBLE9BQU91QixzQkFBc0JyQixLQUFLLENBQUMsR0FBR3pCO0FBQ3hDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYm9va2hhdmVuLy4vYXBwL2FwaS9yZWNvbW1lbmRhdGlvbnMvcm91dGUudHM/NDRhYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoXCI7XHJcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9hdXRoXCI7XHJcbmltcG9ydCB7IE9wZW5MaWJyYXJ5QVBJLCBPcGVuTGlicmFyeUJvb2sgfSBmcm9tIFwiLi4vLi4vLi4vbGliL29wZW5MaWJyYXJ5XCI7XHJcblxyXG4vLyBGb3JjZSBkeW5hbWljIHJlbmRlcmluZyBmb3IgdGhpcyByb3V0ZVxyXG5leHBvcnQgY29uc3QgZHluYW1pYyA9IFwiZm9yY2UtZHluYW1pY1wiO1xyXG5cclxuLy8gU2ltcGxlIHJlY29tbWVuZGF0aW9uIGFsZ29yaXRobSBiYXNlZCBvbiB1c2VyIHByZWZlcmVuY2VzIGFuZCByYXRpbmdzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpO1xyXG5cclxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uZW1haWwpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiVW5hdXRob3JpemVkXCIgfSwgeyBzdGF0dXM6IDQwMSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcclxuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQodXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJsaW1pdFwiKSB8fCBcIjIwXCIpO1xyXG4gICAgY29uc3QgcmVmcmVzaCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwicmVmcmVzaFwiKSA9PT0gXCJ0cnVlXCI7XHJcbiAgICBjb25zdCB1c2VyRW1haWwgPSBzZXNzaW9uLnVzZXIuZW1haWw7XHJcblxyXG4gICAgLy8gSW4gYSByZWFsIGFwcCwgeW91IHdvdWxkIGZldGNoIHVzZXIgcHJlZmVyZW5jZXMgZnJvbSBkYXRhYmFzZVxyXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgdXNlIGEgc2ltcGxlIHJlY29tbWVuZGF0aW9uIGFsZ29yaXRobVxyXG5cclxuICAgIC8vIEdldCB1c2VyIHByZWZlcmVuY2VzICh5b3Ugd291bGQgZmV0Y2ggdGhpcyBmcm9tIHlvdXIgZGF0YWJhc2UpXHJcbiAgICBjb25zdCB1c2VyUHJlZmVyZW5jZXMgPSBnZXRVc2VyUHJlZmVyZW5jZXModXNlckVtYWlsKTtcclxuXHJcbiAgICBjb25zdCByZWNvbW1lbmRhdGlvbnMgPSBhd2FpdCBnZW5lcmF0ZVJlY29tbWVuZGF0aW9ucyhcclxuICAgICAgdXNlclByZWZlcmVuY2VzLFxyXG4gICAgICBsaW1pdCxcclxuICAgICAgcmVmcmVzaFxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBkYXRhOiByZWNvbW1lbmRhdGlvbnMsXHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgcmVjb21tZW5kYXRpb25zOlwiLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHtcclxuICAgICAgICBlcnJvcjogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgcmVjb21tZW5kYXRpb25zXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIFNpbXVsYXRlIGdldHRpbmcgdXNlciBwcmVmZXJlbmNlcyAocmVwbGFjZSB3aXRoIGFjdHVhbCBkYXRhYmFzZSBjYWxsKVxyXG5mdW5jdGlvbiBnZXRVc2VyUHJlZmVyZW5jZXModXNlckVtYWlsOiBzdHJpbmcpIHtcclxuICAvLyBUaGlzIHdvdWxkIGJlIHJlcGxhY2VkIHdpdGggYWN0dWFsIGRhdGFiYXNlIGxvb2t1cFxyXG4gIHJldHVybiB7XHJcbiAgICBnZW5yZXM6IFtcImZpY3Rpb25cIiwgXCJteXN0ZXJ5XCIsIFwic2NpZW5jZVwiXSxcclxuICAgIHJhdGluZ3M6IHtcclxuICAgICAgYm9va3M6IFtdLFxyXG4gICAgICBhdXRob3JzOiBbXSxcclxuICAgIH0sXHJcbiAgICBmYXZvcml0ZUF1dGhvcnM6IFtdLFxyXG4gICAgZGlzbGlrZWRHZW5yZXM6IFtdLFxyXG4gIH07XHJcbn1cclxuXHJcbi8vIFNpbXBsZSByZWNvbW1lbmRhdGlvbiBhbGdvcml0aG1cclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVSZWNvbW1lbmRhdGlvbnMoXHJcbiAgcHJlZmVyZW5jZXM6IGFueSxcclxuICBsaW1pdDogbnVtYmVyLFxyXG4gIHJlZnJlc2g6IGJvb2xlYW4gPSBmYWxzZVxyXG4pIHtcclxuICBjb25zdCByZWNvbW1lbmRhdGlvbnM6IEFycmF5PFxyXG4gICAgT3BlbkxpYnJhcnlCb29rICYge1xyXG4gICAgICByZWNvbW1lbmRhdGlvbl9zY29yZTogbnVtYmVyO1xyXG4gICAgICByZWNvbW1lbmRhdGlvbl9yZWFzb246IHN0cmluZztcclxuICAgIH1cclxuICA+ID0gW107XHJcblxyXG4gIC8vIEFkZCBzb21lIHJhbmRvbWl6YXRpb24gd2hlbiByZWZyZXNoaW5nXHJcbiAgY29uc3QgZ2VucmVzVG9Vc2UgPSByZWZyZXNoXHJcbiAgICA/IFsuLi5wcmVmZXJlbmNlcy5nZW5yZXNdLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSkgLy8gUmFuZG9taXplIGdlbnJlIG9yZGVyXHJcbiAgICA6IHByZWZlcmVuY2VzLmdlbnJlcztcclxuXHJcbiAgLy8gR2VuZXJhdGUgcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIHByZWZlcnJlZCBnZW5yZXNcclxuICBmb3IgKGNvbnN0IGdlbnJlIG9mIGdlbnJlc1RvVXNlLnNsaWNlKDAsIDMpKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBWYXJ5IHRoZSBudW1iZXIgb2YgYm9va3MgZmV0Y2hlZCBhbmQgYWRkIHJhbmRvbW5lc3MgZm9yIHJlZnJlc2hcclxuICAgICAgY29uc3QgYm9va3NUb0ZldGNoID0gcmVmcmVzaCA/IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKSArIDUgOiA1O1xyXG4gICAgICBjb25zdCBzZWFyY2hSZXN1bHQgPSBhd2FpdCBPcGVuTGlicmFyeUFQSS5zZWFyY2hCeUdlbnJlKFxyXG4gICAgICAgIGdlbnJlLFxyXG4gICAgICAgIGJvb2tzVG9GZXRjaFxyXG4gICAgICApO1xyXG4gICAgICBsZXQgYm9va3MgPSBzZWFyY2hSZXN1bHQuZG9jcztcclxuXHJcbiAgICAgIC8vIElmIHJlZnJlc2hpbmcsIHJhbmRvbWl6ZSB0aGUgYm9vayBzZWxlY3Rpb25cclxuICAgICAgaWYgKHJlZnJlc2gpIHtcclxuICAgICAgICBib29rcyA9IGJvb2tzLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGJvb2tzLmZvckVhY2goKGJvb2s6IE9wZW5MaWJyYXJ5Qm9vaykgPT4ge1xyXG4gICAgICAgIC8vIFNpbXBsZSBzY29yaW5nIGFsZ29yaXRobSB3aXRoIHJhbmRvbWl6YXRpb24gZm9yIHJlZnJlc2hcclxuICAgICAgICBsZXQgc2NvcmUgPSByZWZyZXNoID8gTWF0aC5yYW5kb20oKSAqIDAuMyArIDAuNCA6IDAuNTsgLy8gQmFzZSBzY29yZSB3aXRoIHZhcmlhdGlvblxyXG5cclxuICAgICAgICAvLyBCb29zdCBzY29yZSBmb3IgcHJlZmVycmVkIGdlbnJlc1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgIHByZWZlcmVuY2VzLmdlbnJlcy5zb21lKChnOiBzdHJpbmcpID0+XHJcbiAgICAgICAgICAgIGJvb2suc3ViamVjdD8uc29tZSgoczogc3RyaW5nKSA9PlxyXG4gICAgICAgICAgICAgIHMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhnLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHNjb3JlICs9IHJlZnJlc2ggPyBNYXRoLnJhbmRvbSgpICogMC40ICsgMC4yIDogMC4zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQm9vc3Qgc2NvcmUgZm9yIGZhdm9yaXRlIGF1dGhvcnNcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBwcmVmZXJlbmNlcy5mYXZvcml0ZUF1dGhvcnMuc29tZSgoYXV0aG9yOiBzdHJpbmcpID0+XHJcbiAgICAgICAgICAgIGJvb2suYXV0aG9yX25hbWU/LnNvbWUoKGE6IHN0cmluZykgPT5cclxuICAgICAgICAgICAgICBhLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoYXV0aG9yLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHNjb3JlICs9IHJlZnJlc2ggPyBNYXRoLnJhbmRvbSgpICogMC41ICsgMC4zIDogMC40O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVkdWNlIHNjb3JlIGZvciBkaXNsaWtlZCBnZW5yZXNcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBwcmVmZXJlbmNlcy5kaXNsaWtlZEdlbnJlcy5zb21lKChnOiBzdHJpbmcpID0+XHJcbiAgICAgICAgICAgIGJvb2suc3ViamVjdD8uc29tZSgoczogc3RyaW5nKSA9PlxyXG4gICAgICAgICAgICAgIHMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhnLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgIClcclxuICAgICAgICApIHtcclxuICAgICAgICAgIHNjb3JlIC09IHJlZnJlc2ggPyBNYXRoLnJhbmRvbSgpICogMC4zICsgMC4xIDogMC4yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goe1xyXG4gICAgICAgICAgLi4uYm9vayxcclxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uX3Njb3JlOiBzY29yZSxcclxuICAgICAgICAgIHJlY29tbWVuZGF0aW9uX3JlYXNvbjogYEJhc2VkIG9uIHlvdXIgaW50ZXJlc3QgaW4gJHtnZW5yZX1gLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGJvb2tzIGZvciBnZW5yZSAke2dlbnJlfTpgLCBlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBTb3J0IGJ5IHJlY29tbWVuZGF0aW9uIHNjb3JlIGFuZCByZW1vdmUgZHVwbGljYXRlc1xyXG4gIGxldCB1bmlxdWVSZWNvbW1lbmRhdGlvbnMgPSByZWNvbW1lbmRhdGlvbnNcclxuICAgIC5maWx0ZXIoXHJcbiAgICAgIChib29rLCBpbmRleCwgc2VsZikgPT4gaW5kZXggPT09IHNlbGYuZmluZEluZGV4KChiKSA9PiBiLmtleSA9PT0gYm9vay5rZXkpXHJcbiAgICApXHJcbiAgICAuc29ydCgoYSwgYikgPT4gYi5yZWNvbW1lbmRhdGlvbl9zY29yZSAtIGEucmVjb21tZW5kYXRpb25fc2NvcmUpO1xyXG5cclxuICAvLyBJZiByZWZyZXNoaW5nLCBhZGQgc29tZSByYW5kb21pemF0aW9uIHRvIHRoZSBmaW5hbCBzZWxlY3Rpb25cclxuICBpZiAocmVmcmVzaCkge1xyXG4gICAgdW5pcXVlUmVjb21tZW5kYXRpb25zID0gdW5pcXVlUmVjb21tZW5kYXRpb25zLnNvcnQoXHJcbiAgICAgICgpID0+IE1hdGgucmFuZG9tKCkgLSAwLjVcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdW5pcXVlUmVjb21tZW5kYXRpb25zLnNsaWNlKDAsIGxpbWl0KTtcclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiT3BlbkxpYnJhcnlBUEkiLCJkeW5hbWljIiwiR0VUIiwicmVxdWVzdCIsInNlc3Npb24iLCJ1c2VyIiwiZW1haWwiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJ1cmwiLCJVUkwiLCJsaW1pdCIsInBhcnNlSW50Iiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwicmVmcmVzaCIsInVzZXJFbWFpbCIsInVzZXJQcmVmZXJlbmNlcyIsImdldFVzZXJQcmVmZXJlbmNlcyIsInJlY29tbWVuZGF0aW9ucyIsImdlbmVyYXRlUmVjb21tZW5kYXRpb25zIiwic3VjY2VzcyIsImRhdGEiLCJjb25zb2xlIiwiZ2VucmVzIiwicmF0aW5ncyIsImJvb2tzIiwiYXV0aG9ycyIsImZhdm9yaXRlQXV0aG9ycyIsImRpc2xpa2VkR2VucmVzIiwicHJlZmVyZW5jZXMiLCJnZW5yZXNUb1VzZSIsInNvcnQiLCJNYXRoIiwicmFuZG9tIiwiZ2VucmUiLCJzbGljZSIsImJvb2tzVG9GZXRjaCIsImZsb29yIiwic2VhcmNoUmVzdWx0Iiwic2VhcmNoQnlHZW5yZSIsImRvY3MiLCJmb3JFYWNoIiwiYm9vayIsInNjb3JlIiwic29tZSIsImciLCJzdWJqZWN0IiwicyIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJhdXRob3IiLCJhdXRob3JfbmFtZSIsImEiLCJwdXNoIiwicmVjb21tZW5kYXRpb25fc2NvcmUiLCJyZWNvbW1lbmRhdGlvbl9yZWFzb24iLCJ1bmlxdWVSZWNvbW1lbmRhdGlvbnMiLCJmaWx0ZXIiLCJpbmRleCIsInNlbGYiLCJmaW5kSW5kZXgiLCJiIiwia2V5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/recommendations/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/github */ \"(rsc)/./node_modules/next-auth/providers/github.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n\n\n\n\nconst authOptions = {\n    providers: [\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        }),\n        (0,next_auth_providers_github__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GITHUB_ID,\n            clientSecret: process.env.GITHUB_SECRET\n        }),\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                // TODO: Implement your own authentication logic here\n                // This is just a placeholder - integrate with Firebase Auth\n                if (credentials?.email && credentials?.password) {\n                    return {\n                        id: \"1\",\n                        email: credentials.email,\n                        name: \"Test User\"\n                    };\n                }\n                return null;\n            }\n        })\n    ],\n    pages: {\n        signIn: \"/auth/signin\",\n        signUp: \"/auth/signup\"\n    },\n    session: {\n        strategy: \"jwt\"\n    },\n    callbacks: {\n        async jwt ({ token, user, account, profile }) {\n            if (user) {\n                token.id = user.id;\n                token.email = user.email;\n                token.name = user.name;\n                token.picture = user.image || profile?.picture || profile?.avatar_url;\n            }\n            if (account) {\n                token.accessToken = account.access_token;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.id;\n                session.user.email = token.email;\n                session.user.name = token.name;\n                session.user.image = token.picture;\n                session.accessToken = token.accessToken;\n            }\n            return session;\n        },\n        async signIn ({ user, account, profile }) {\n            // Handle successful sign-in\n            console.log(\"Sign in successful:\", {\n                user,\n                account,\n                profile\n            });\n            return true;\n        },\n        async redirect ({ url, baseUrl }) {\n            // Redirect to onboarding after successful sign-in\n            if (url.startsWith(baseUrl)) return url;\n            if (url.startsWith(\"/\")) return `${baseUrl}${url}`;\n            return baseUrl + \"/onboarding\";\n        }\n    },\n    debug: \"development\" === \"development\"\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dGVudCI6WyJpbXBvcnQgTmV4dEF1dGggZnJvbSBcIm5leHQtYXV0aFwiO1xyXG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvZ29vZ2xlXCI7XHJcbmltcG9ydCBHaXRIdWJQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9naXRodWJcIjtcclxuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9ucyA9IHtcclxuICBwcm92aWRlcnM6IFtcclxuICAgIEdvb2dsZVByb3ZpZGVyKHtcclxuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQhLFxyXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVUISxcclxuICAgIH0pLFxyXG4gICAgR2l0SHViUHJvdmlkZXIoe1xyXG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR0lUSFVCX0lEISxcclxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HSVRIVUJfU0VDUkVUISxcclxuICAgIH0pLFxyXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XHJcbiAgICAgIG5hbWU6IFwiY3JlZGVudGlhbHNcIixcclxuICAgICAgY3JlZGVudGlhbHM6IHtcclxuICAgICAgICBlbWFpbDogeyBsYWJlbDogXCJFbWFpbFwiLCB0eXBlOiBcImVtYWlsXCIgfSxcclxuICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogXCJQYXNzd29yZFwiLCB0eXBlOiBcInBhc3N3b3JkXCIgfSxcclxuICAgICAgfSxcclxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzKSB7XHJcbiAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHlvdXIgb3duIGF1dGhlbnRpY2F0aW9uIGxvZ2ljIGhlcmVcclxuICAgICAgICAvLyBUaGlzIGlzIGp1c3QgYSBwbGFjZWhvbGRlciAtIGludGVncmF0ZSB3aXRoIEZpcmViYXNlIEF1dGhcclxuICAgICAgICBpZiAoY3JlZGVudGlhbHM/LmVtYWlsICYmIGNyZWRlbnRpYWxzPy5wYXNzd29yZCkge1xyXG4gICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IFwiMVwiLFxyXG4gICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwsXHJcbiAgICAgICAgICAgIG5hbWU6IFwiVGVzdCBVc2VyXCIsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgfSxcclxuICAgIH0pLFxyXG4gIF0sXHJcbiAgcGFnZXM6IHtcclxuICAgIHNpZ25JbjogXCIvYXV0aC9zaWduaW5cIixcclxuICAgIHNpZ25VcDogXCIvYXV0aC9zaWdudXBcIixcclxuICB9LFxyXG4gIHNlc3Npb246IHtcclxuICAgIHN0cmF0ZWd5OiBcImp3dFwiIGFzIGNvbnN0LFxyXG4gIH0sXHJcbiAgY2FsbGJhY2tzOiB7XHJcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciwgYWNjb3VudCwgcHJvZmlsZSB9OiBhbnkpIHtcclxuICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWQ7XHJcbiAgICAgICAgdG9rZW4uZW1haWwgPSB1c2VyLmVtYWlsO1xyXG4gICAgICAgIHRva2VuLm5hbWUgPSB1c2VyLm5hbWU7XHJcbiAgICAgICAgdG9rZW4ucGljdHVyZSA9IHVzZXIuaW1hZ2UgfHwgcHJvZmlsZT8ucGljdHVyZSB8fCBwcm9maWxlPy5hdmF0YXJfdXJsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChhY2NvdW50KSB7XHJcbiAgICAgICAgdG9rZW4uYWNjZXNzVG9rZW4gPSBhY2NvdW50LmFjY2Vzc190b2tlbjtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdG9rZW47XHJcbiAgICB9LFxyXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH06IGFueSkge1xyXG4gICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5pZDtcclxuICAgICAgICBzZXNzaW9uLnVzZXIuZW1haWwgPSB0b2tlbi5lbWFpbDtcclxuICAgICAgICBzZXNzaW9uLnVzZXIubmFtZSA9IHRva2VuLm5hbWU7XHJcbiAgICAgICAgc2Vzc2lvbi51c2VyLmltYWdlID0gdG9rZW4ucGljdHVyZTtcclxuICAgICAgICBzZXNzaW9uLmFjY2Vzc1Rva2VuID0gdG9rZW4uYWNjZXNzVG9rZW47XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHNlc3Npb247XHJcbiAgICB9LFxyXG4gICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSB9OiBhbnkpIHtcclxuICAgICAgLy8gSGFuZGxlIHN1Y2Nlc3NmdWwgc2lnbi1pblxyXG4gICAgICBjb25zb2xlLmxvZyhcIlNpZ24gaW4gc3VjY2Vzc2Z1bDpcIiwgeyB1c2VyLCBhY2NvdW50LCBwcm9maWxlIH0pO1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcbiAgICBhc3luYyByZWRpcmVjdCh7IHVybCwgYmFzZVVybCB9OiBhbnkpIHtcclxuICAgICAgLy8gUmVkaXJlY3QgdG8gb25ib2FyZGluZyBhZnRlciBzdWNjZXNzZnVsIHNpZ24taW5cclxuICAgICAgaWYgKHVybC5zdGFydHNXaXRoKGJhc2VVcmwpKSByZXR1cm4gdXJsO1xyXG4gICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXCIvXCIpKSByZXR1cm4gYCR7YmFzZVVybH0ke3VybH1gO1xyXG4gICAgICByZXR1cm4gYmFzZVVybCArIFwiL29uYm9hcmRpbmdcIjtcclxuICAgIH0sXHJcbiAgfSxcclxuICBkZWJ1ZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIixcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKGF1dGhPcHRpb25zKTtcclxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiR29vZ2xlUHJvdmlkZXIiLCJHaXRIdWJQcm92aWRlciIsIkNyZWRlbnRpYWxzUHJvdmlkZXIiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsImNsaWVudElkIiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJHT09HTEVfQ0xJRU5UX1NFQ1JFVCIsIkdJVEhVQl9JRCIsIkdJVEhVQl9TRUNSRVQiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwiaWQiLCJwYWdlcyIsInNpZ25JbiIsInNpZ25VcCIsInNlc3Npb24iLCJzdHJhdGVneSIsImNhbGxiYWNrcyIsImp3dCIsInRva2VuIiwidXNlciIsImFjY291bnQiLCJwcm9maWxlIiwicGljdHVyZSIsImltYWdlIiwiYXZhdGFyX3VybCIsImFjY2Vzc1Rva2VuIiwiYWNjZXNzX3Rva2VuIiwiY29uc29sZSIsImxvZyIsInJlZGlyZWN0IiwidXJsIiwiYmFzZVVybCIsInN0YXJ0c1dpdGgiLCJkZWJ1ZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/openLibrary.ts":
/*!****************************!*\
  !*** ./lib/openLibrary.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenLibraryAPI: () => (/* binding */ OpenLibraryAPI),\n/* harmony export */   debounce: () => (/* binding */ debounce)\n/* harmony export */ });\nconst OPEN_LIBRARY_BASE_URL = \"https://openlibrary.org\";\nconst COVERS_BASE_URL = \"https://covers.openlibrary.org/b\";\nclass OpenLibraryAPI {\n    static async searchBooks(query, limit = 20, offset = 0, sortBy = \"relevance\") {\n        const searchParams = new URLSearchParams({\n            q: query,\n            limit: limit.toString(),\n            offset: offset.toString(),\n            fields: \"key,title,author_name,first_publish_year,isbn,cover_i,publisher,language,subject,ratings_average,ratings_count,want_to_read_count,currently_reading_count,already_read_count\"\n        });\n        // Add sort parameter if not relevance\n        if (sortBy !== \"relevance\") {\n            const sortMap = {\n                title_asc: \"title asc\",\n                title_desc: \"title desc\",\n                year_newest: \"new\",\n                year_oldest: \"old\",\n                rating_highest: \"rating desc\",\n                popularity_highest: \"want_to_read_count desc\"\n            };\n            const sortValue = sortMap[sortBy];\n            if (sortValue) {\n                searchParams.append(\"sort\", sortValue);\n            }\n        }\n        const response = await fetch(`${OPEN_LIBRARY_BASE_URL}/search.json?${searchParams}`);\n        if (!response.ok) {\n            throw new Error(`Search failed: ${response.statusText}`);\n        }\n        return response.json();\n    }\n    static async getBookDetails(bookKey) {\n        const response = await fetch(`${OPEN_LIBRARY_BASE_URL}${bookKey}.json`);\n        if (!response.ok) {\n            throw new Error(`Failed to fetch book details: ${response.statusText}`);\n        }\n        return response.json();\n    }\n    static async getAuthorDetails(authorKey) {\n        const response = await fetch(`${OPEN_LIBRARY_BASE_URL}${authorKey}.json`);\n        if (!response.ok) {\n            throw new Error(`Failed to fetch author details: ${response.statusText}`);\n        }\n        return response.json();\n    }\n    static getCoverUrl(coverId, size = \"M\") {\n        return `${COVERS_BASE_URL}/id/${coverId}-${size}.jpg`;\n    }\n    static async searchByGenre(genre, limit = 20, offset = 0) {\n        return this.searchBooks(`subject:\"${genre}\"`, limit, offset, \"relevance\");\n    }\n    static async searchByAuthor(author, limit = 20, offset = 0) {\n        return this.searchBooks(`author:\"${author}\"`, limit, offset, \"relevance\");\n    }\n    static async searchByISBN(isbn) {\n        return this.searchBooks(`isbn:${isbn}`, 1, 0, \"relevance\");\n    }\n    static async getTrendingBooks(limit = 20) {\n        // Use a search for popular books (this is a simplified approach)\n        return this.searchBooks(\"*\", limit, 0, \"popularity_highest\");\n    }\n    static async getPopularBooksByGenre(genre, limit = 20) {\n        // Search for popular books in genre, sorted by want-to-read count\n        const searchParams = new URLSearchParams({\n            q: `subject:\"${genre}\" AND has_fulltext:true`,\n            limit: limit.toString(),\n            offset: \"0\",\n            sort: \"want_to_read_count desc\",\n            fields: \"key,title,author_name,first_publish_year,isbn,cover_i,publisher,language,subject,ratings_average,ratings_count,want_to_read_count,currently_reading_count,already_read_count,edition_count\"\n        });\n        const response = await fetch(`${OPEN_LIBRARY_BASE_URL}/search.json?${searchParams}`);\n        if (!response.ok) {\n            throw new Error(`Search failed: ${response.statusText}`);\n        }\n        return response.json();\n    }\n    static formatBookData(book) {\n        // Extract just the ID part from the key (e.g., \"/works/OL15601954W\" -> \"works/OL15601954W\")\n        const bookId = book.key.startsWith(\"/\") ? book.key.slice(1) : book.key;\n        return {\n            id: bookId,\n            title: book.title,\n            author: book.author_name?.[0] || \"Unknown Author\",\n            authors: book.author_name || [],\n            cover: book.cover_i ? this.getCoverUrl(book.cover_i) : \"/placeholder-book.svg\",\n            publishYear: book.first_publish_year,\n            isbn: book.isbn?.[0],\n            rating: book.ratings_average,\n            reviewCount: book.ratings_count,\n            subjects: book.subject?.slice(0, 5) || [],\n            publishers: book.publisher || [],\n            languages: book.language || [],\n            wantToReadCount: book.want_to_read_count,\n            currentlyReadingCount: book.currently_reading_count,\n            alreadyReadCount: book.already_read_count\n        };\n    }\n}\n// Helper function to debounce search requests\nfunction debounce(func, wait) {\n    let timeout;\n    return (...args)=>{\n        clearTimeout(timeout);\n        timeout = setTimeout(()=>func(...args), wait);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUU7WUFDekNlLFlBQVluQixLQUFLb0IsU0FBUyxJQUFJLEVBQUU7WUFDaENDLFdBQVdyQixLQUFLc0IsUUFBUSxJQUFJLEVBQUU7WUFDOUJDLGlCQUFpQnZCLEtBQUt3QixrQkFBa0I7WUFDeENDLHVCQUF1QnpCLEtBQUswQix1QkFBdUI7WUFDbkRDLGtCQUFrQjNCLEtBQUs0QixrQkFBa0I7UUFDM0M7SUFDRjtBQUNGO0FBRUEsOENBQThDO0FBQ3ZDLFNBQVNDLFNBQ2RDLElBQU8sRUFDUEMsSUFBWTtJQUVaLElBQUlDO0lBQ0osT0FBTyxDQUFDLEdBQUdDO1FBQ1RDLGFBQWFGO1FBQ2JBLFVBQVVHLFdBQVcsSUFBTUwsUUFBUUcsT0FBT0Y7SUFDNUM7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvb2toYXZlbi8uL2xpYi9vcGVuTGlicmFyeS50cz9hYTljIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE9QRU5fTElCUkFSWV9CQVNFX1VSTCA9IFwiaHR0cHM6Ly9vcGVubGlicmFyeS5vcmdcIjtcclxuY29uc3QgQ09WRVJTX0JBU0VfVVJMID0gXCJodHRwczovL2NvdmVycy5vcGVubGlicmFyeS5vcmcvYlwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBPcGVuTGlicmFyeUJvb2sge1xyXG4gIGtleTogc3RyaW5nO1xyXG4gIHRpdGxlOiBzdHJpbmc7XHJcbiAgYXV0aG9yX25hbWU/OiBzdHJpbmdbXTtcclxuICBmaXJzdF9wdWJsaXNoX3llYXI/OiBudW1iZXI7XHJcbiAgaXNibj86IHN0cmluZ1tdO1xyXG4gIGNvdmVyX2k/OiBudW1iZXI7XHJcbiAgcHVibGlzaGVyPzogc3RyaW5nW107XHJcbiAgbGFuZ3VhZ2U/OiBzdHJpbmdbXTtcclxuICBzdWJqZWN0Pzogc3RyaW5nW107XHJcbiAgcmF0aW5nc19hdmVyYWdlPzogbnVtYmVyO1xyXG4gIHJhdGluZ3NfY291bnQ/OiBudW1iZXI7XHJcbiAgd2FudF90b19yZWFkX2NvdW50PzogbnVtYmVyO1xyXG4gIGN1cnJlbnRseV9yZWFkaW5nX2NvdW50PzogbnVtYmVyO1xyXG4gIGFscmVhZHlfcmVhZF9jb3VudD86IG51bWJlcjtcclxuICBlZGl0aW9uX2NvdW50PzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJvb2tTZWFyY2hSZXNwb25zZSB7XHJcbiAgbnVtRm91bmQ6IG51bWJlcjtcclxuICBzdGFydDogbnVtYmVyO1xyXG4gIGRvY3M6IE9wZW5MaWJyYXJ5Qm9va1tdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJvb2tEZXRhaWxzIHtcclxuICBrZXk6IHN0cmluZztcclxuICB0aXRsZTogc3RyaW5nO1xyXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nIHwgeyB2YWx1ZTogc3RyaW5nIH07XHJcbiAgYXV0aG9ycz86IEFycmF5PHsga2V5OiBzdHJpbmcgfT47XHJcbiAgc3ViamVjdHM/OiBzdHJpbmdbXTtcclxuICBjb3ZlcnM/OiBudW1iZXJbXTtcclxuICBpc2JuXzEwPzogc3RyaW5nW107XHJcbiAgaXNibl8xMz86IHN0cmluZ1tdO1xyXG4gIHB1Ymxpc2hfZGF0ZT86IHN0cmluZztcclxuICBwdWJsaXNoZXJzPzogc3RyaW5nW107XHJcbiAgbnVtYmVyX29mX3BhZ2VzPzogbnVtYmVyO1xyXG4gIHBoeXNpY2FsX2Zvcm1hdD86IHN0cmluZztcclxuICB3b3Jrcz86IEFycmF5PHsga2V5OiBzdHJpbmcgfT47XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPcGVuTGlicmFyeUFQSSB7XHJcbiAgc3RhdGljIGFzeW5jIHNlYXJjaEJvb2tzKFxyXG4gICAgcXVlcnk6IHN0cmluZyxcclxuICAgIGxpbWl0OiBudW1iZXIgPSAyMCxcclxuICAgIG9mZnNldDogbnVtYmVyID0gMCxcclxuICAgIHNvcnRCeTogc3RyaW5nID0gXCJyZWxldmFuY2VcIlxyXG4gICk6IFByb21pc2U8Qm9va1NlYXJjaFJlc3BvbnNlPiB7XHJcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcclxuICAgICAgcTogcXVlcnksXHJcbiAgICAgIGxpbWl0OiBsaW1pdC50b1N0cmluZygpLFxyXG4gICAgICBvZmZzZXQ6IG9mZnNldC50b1N0cmluZygpLFxyXG4gICAgICBmaWVsZHM6XHJcbiAgICAgICAgXCJrZXksdGl0bGUsYXV0aG9yX25hbWUsZmlyc3RfcHVibGlzaF95ZWFyLGlzYm4sY292ZXJfaSxwdWJsaXNoZXIsbGFuZ3VhZ2Usc3ViamVjdCxyYXRpbmdzX2F2ZXJhZ2UscmF0aW5nc19jb3VudCx3YW50X3RvX3JlYWRfY291bnQsY3VycmVudGx5X3JlYWRpbmdfY291bnQsYWxyZWFkeV9yZWFkX2NvdW50XCIsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBBZGQgc29ydCBwYXJhbWV0ZXIgaWYgbm90IHJlbGV2YW5jZVxyXG4gICAgaWYgKHNvcnRCeSAhPT0gXCJyZWxldmFuY2VcIikge1xyXG4gICAgICBjb25zdCBzb3J0TWFwOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xyXG4gICAgICAgIHRpdGxlX2FzYzogXCJ0aXRsZSBhc2NcIixcclxuICAgICAgICB0aXRsZV9kZXNjOiBcInRpdGxlIGRlc2NcIixcclxuICAgICAgICB5ZWFyX25ld2VzdDogXCJuZXdcIixcclxuICAgICAgICB5ZWFyX29sZGVzdDogXCJvbGRcIixcclxuICAgICAgICByYXRpbmdfaGlnaGVzdDogXCJyYXRpbmcgZGVzY1wiLFxyXG4gICAgICAgIHBvcHVsYXJpdHlfaGlnaGVzdDogXCJ3YW50X3RvX3JlYWRfY291bnQgZGVzY1wiLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3Qgc29ydFZhbHVlID0gc29ydE1hcFtzb3J0QnldO1xyXG4gICAgICBpZiAoc29ydFZhbHVlKSB7XHJcbiAgICAgICAgc2VhcmNoUGFyYW1zLmFwcGVuZChcInNvcnRcIiwgc29ydFZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgIGAke09QRU5fTElCUkFSWV9CQVNFX1VSTH0vc2VhcmNoLmpzb24/JHtzZWFyY2hQYXJhbXN9YFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU2VhcmNoIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZ2V0Qm9va0RldGFpbHMoYm9va0tleTogc3RyaW5nKTogUHJvbWlzZTxCb29rRGV0YWlscz4ge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtPUEVOX0xJQlJBUllfQkFTRV9VUkx9JHtib29rS2V5fS5qc29uYCk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBib29rIGRldGFpbHM6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGdldEF1dGhvckRldGFpbHMoYXV0aG9yS2V5OiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7T1BFTl9MSUJSQVJZX0JBU0VfVVJMfSR7YXV0aG9yS2V5fS5qc29uYCk7XHJcblxyXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBhdXRob3IgZGV0YWlsczogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0Q292ZXJVcmwoY292ZXJJZDogbnVtYmVyLCBzaXplOiBcIlNcIiB8IFwiTVwiIHwgXCJMXCIgPSBcIk1cIik6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gYCR7Q09WRVJTX0JBU0VfVVJMfS9pZC8ke2NvdmVySWR9LSR7c2l6ZX0uanBnYDtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBzZWFyY2hCeUdlbnJlKFxyXG4gICAgZ2VucmU6IHN0cmluZyxcclxuICAgIGxpbWl0OiBudW1iZXIgPSAyMCxcclxuICAgIG9mZnNldDogbnVtYmVyID0gMFxyXG4gICk6IFByb21pc2U8Qm9va1NlYXJjaFJlc3BvbnNlPiB7XHJcbiAgICByZXR1cm4gdGhpcy5zZWFyY2hCb29rcyhgc3ViamVjdDpcIiR7Z2VucmV9XCJgLCBsaW1pdCwgb2Zmc2V0LCBcInJlbGV2YW5jZVwiKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBhc3luYyBzZWFyY2hCeUF1dGhvcihcclxuICAgIGF1dGhvcjogc3RyaW5nLFxyXG4gICAgbGltaXQ6IG51bWJlciA9IDIwLFxyXG4gICAgb2Zmc2V0OiBudW1iZXIgPSAwXHJcbiAgKTogUHJvbWlzZTxCb29rU2VhcmNoUmVzcG9uc2U+IHtcclxuICAgIHJldHVybiB0aGlzLnNlYXJjaEJvb2tzKGBhdXRob3I6XCIke2F1dGhvcn1cImAsIGxpbWl0LCBvZmZzZXQsIFwicmVsZXZhbmNlXCIpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIHNlYXJjaEJ5SVNCTihpc2JuOiBzdHJpbmcpOiBQcm9taXNlPEJvb2tTZWFyY2hSZXNwb25zZT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2VhcmNoQm9va3MoYGlzYm46JHtpc2JufWAsIDEsIDAsIFwicmVsZXZhbmNlXCIpO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGFzeW5jIGdldFRyZW5kaW5nQm9va3MoXHJcbiAgICBsaW1pdDogbnVtYmVyID0gMjBcclxuICApOiBQcm9taXNlPEJvb2tTZWFyY2hSZXNwb25zZT4ge1xyXG4gICAgLy8gVXNlIGEgc2VhcmNoIGZvciBwb3B1bGFyIGJvb2tzICh0aGlzIGlzIGEgc2ltcGxpZmllZCBhcHByb2FjaClcclxuICAgIHJldHVybiB0aGlzLnNlYXJjaEJvb2tzKFwiKlwiLCBsaW1pdCwgMCwgXCJwb3B1bGFyaXR5X2hpZ2hlc3RcIik7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgYXN5bmMgZ2V0UG9wdWxhckJvb2tzQnlHZW5yZShcclxuICAgIGdlbnJlOiBzdHJpbmcsXHJcbiAgICBsaW1pdDogbnVtYmVyID0gMjBcclxuICApOiBQcm9taXNlPEJvb2tTZWFyY2hSZXNwb25zZT4ge1xyXG4gICAgLy8gU2VhcmNoIGZvciBwb3B1bGFyIGJvb2tzIGluIGdlbnJlLCBzb3J0ZWQgYnkgd2FudC10by1yZWFkIGNvdW50XHJcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcclxuICAgICAgcTogYHN1YmplY3Q6XCIke2dlbnJlfVwiIEFORCBoYXNfZnVsbHRleHQ6dHJ1ZWAsXHJcbiAgICAgIGxpbWl0OiBsaW1pdC50b1N0cmluZygpLFxyXG4gICAgICBvZmZzZXQ6IFwiMFwiLFxyXG4gICAgICBzb3J0OiBcIndhbnRfdG9fcmVhZF9jb3VudCBkZXNjXCIsXHJcbiAgICAgIGZpZWxkczpcclxuICAgICAgICBcImtleSx0aXRsZSxhdXRob3JfbmFtZSxmaXJzdF9wdWJsaXNoX3llYXIsaXNibixjb3Zlcl9pLHB1Ymxpc2hlcixsYW5ndWFnZSxzdWJqZWN0LHJhdGluZ3NfYXZlcmFnZSxyYXRpbmdzX2NvdW50LHdhbnRfdG9fcmVhZF9jb3VudCxjdXJyZW50bHlfcmVhZGluZ19jb3VudCxhbHJlYWR5X3JlYWRfY291bnQsZWRpdGlvbl9jb3VudFwiLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgYCR7T1BFTl9MSUJSQVJZX0JBU0VfVVJMfS9zZWFyY2guanNvbj8ke3NlYXJjaFBhcmFtc31gXHJcbiAgICApO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZWFyY2ggZmFpbGVkOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICB9XHJcblxyXG4gIHN0YXRpYyBmb3JtYXRCb29rRGF0YShib29rOiBPcGVuTGlicmFyeUJvb2spIHtcclxuICAgIC8vIEV4dHJhY3QganVzdCB0aGUgSUQgcGFydCBmcm9tIHRoZSBrZXkgKGUuZy4sIFwiL3dvcmtzL09MMTU2MDE5NTRXXCIgLT4gXCJ3b3Jrcy9PTDE1NjAxOTU0V1wiKVxyXG4gICAgY29uc3QgYm9va0lkID0gYm9vay5rZXkuc3RhcnRzV2l0aChcIi9cIikgPyBib29rLmtleS5zbGljZSgxKSA6IGJvb2sua2V5O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlkOiBib29rSWQsXHJcbiAgICAgIHRpdGxlOiBib29rLnRpdGxlLFxyXG4gICAgICBhdXRob3I6IGJvb2suYXV0aG9yX25hbWU/LlswXSB8fCBcIlVua25vd24gQXV0aG9yXCIsXHJcbiAgICAgIGF1dGhvcnM6IGJvb2suYXV0aG9yX25hbWUgfHwgW10sXHJcbiAgICAgIGNvdmVyOiBib29rLmNvdmVyX2lcclxuICAgICAgICA/IHRoaXMuZ2V0Q292ZXJVcmwoYm9vay5jb3Zlcl9pKVxyXG4gICAgICAgIDogXCIvcGxhY2Vob2xkZXItYm9vay5zdmdcIixcclxuICAgICAgcHVibGlzaFllYXI6IGJvb2suZmlyc3RfcHVibGlzaF95ZWFyLFxyXG4gICAgICBpc2JuOiBib29rLmlzYm4/LlswXSxcclxuICAgICAgcmF0aW5nOiBib29rLnJhdGluZ3NfYXZlcmFnZSxcclxuICAgICAgcmV2aWV3Q291bnQ6IGJvb2sucmF0aW5nc19jb3VudCxcclxuICAgICAgc3ViamVjdHM6IGJvb2suc3ViamVjdD8uc2xpY2UoMCwgNSkgfHwgW10sXHJcbiAgICAgIHB1Ymxpc2hlcnM6IGJvb2sucHVibGlzaGVyIHx8IFtdLFxyXG4gICAgICBsYW5ndWFnZXM6IGJvb2subGFuZ3VhZ2UgfHwgW10sXHJcbiAgICAgIHdhbnRUb1JlYWRDb3VudDogYm9vay53YW50X3RvX3JlYWRfY291bnQsXHJcbiAgICAgIGN1cnJlbnRseVJlYWRpbmdDb3VudDogYm9vay5jdXJyZW50bHlfcmVhZGluZ19jb3VudCxcclxuICAgICAgYWxyZWFkeVJlYWRDb3VudDogYm9vay5hbHJlYWR5X3JlYWRfY291bnQsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGRlYm91bmNlIHNlYXJjaCByZXF1ZXN0c1xyXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2U8VCBleHRlbmRzICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcclxuICBmdW5jOiBULFxyXG4gIHdhaXQ6IG51bWJlclxyXG4pOiAoLi4uYXJnczogUGFyYW1ldGVyczxUPikgPT4gdm9pZCB7XHJcbiAgbGV0IHRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0O1xyXG4gIHJldHVybiAoLi4uYXJnczogUGFyYW1ldGVyczxUPikgPT4ge1xyXG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gZnVuYyguLi5hcmdzKSwgd2FpdCk7XHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiT1BFTl9MSUJSQVJZX0JBU0VfVVJMIiwiQ09WRVJTX0JBU0VfVVJMIiwiT3BlbkxpYnJhcnlBUEkiLCJzZWFyY2hCb29rcyIsInF1ZXJ5IiwibGltaXQiLCJvZmZzZXQiLCJzb3J0QnkiLCJzZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJxIiwidG9TdHJpbmciLCJmaWVsZHMiLCJzb3J0TWFwIiwidGl0bGVfYXNjIiwidGl0bGVfZGVzYyIsInllYXJfbmV3ZXN0IiwieWVhcl9vbGRlc3QiLCJyYXRpbmdfaGlnaGVzdCIsInBvcHVsYXJpdHlfaGlnaGVzdCIsInNvcnRWYWx1ZSIsImFwcGVuZCIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsIkVycm9yIiwic3RhdHVzVGV4dCIsImpzb24iLCJnZXRCb29rRGV0YWlscyIsImJvb2tLZXkiLCJnZXRBdXRob3JEZXRhaWxzIiwiYXV0aG9yS2V5IiwiZ2V0Q292ZXJVcmwiLCJjb3ZlcklkIiwic2l6ZSIsInNlYXJjaEJ5R2VucmUiLCJnZW5yZSIsInNlYXJjaEJ5QXV0aG9yIiwiYXV0aG9yIiwic2VhcmNoQnlJU0JOIiwiaXNibiIsImdldFRyZW5kaW5nQm9va3MiLCJnZXRQb3B1bGFyQm9va3NCeUdlbnJlIiwic29ydCIsImZvcm1hdEJvb2tEYXRhIiwiYm9vayIsImJvb2tJZCIsImtleSIsInN0YXJ0c1dpdGgiLCJzbGljZSIsImlkIiwidGl0bGUiLCJhdXRob3JfbmFtZSIsImF1dGhvcnMiLCJjb3ZlciIsImNvdmVyX2kiLCJwdWJsaXNoWWVhciIsImZpcnN0X3B1Ymxpc2hfeWVhciIsInJhdGluZyIsInJhdGluZ3NfYXZlcmFnZSIsInJldmlld0NvdW50IiwicmF0aW5nc19jb3VudCIsInN1YmplY3RzIiwic3ViamVjdCIsInB1Ymxpc2hlcnMiLCJwdWJsaXNoZXIiLCJsYW5ndWFnZXMiLCJsYW5ndWFnZSIsIndhbnRUb1JlYWRDb3VudCIsIndhbnRfdG9fcmVhZF9jb3VudCIsImN1cnJlbnRseVJlYWRpbmdDb3VudCIsImN1cnJlbnRseV9yZWFkaW5nX2NvdW50IiwiYWxyZWFkeVJlYWRDb3VudCIsImFscmVhZHlfcmVhZF9jb3VudCIsImRlYm91bmNlIiwiZnVuYyIsIndhaXQiLCJ0aW1lb3V0IiwiYXJncyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/openLibrary.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/preact-render-to-string","vendor-chunks/cookie","vendor-chunks/@panva","vendor-chunks/oidc-token-hash"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Frecommendations%2Froute&page=%2Fapi%2Frecommendations%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frecommendations%2Froute.ts&appDir=C%3A%5CUsers%5CKatekaniNyamandi%5Cbookhaven%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKatekaniNyamandi%5Cbookhaven&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();